<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Thomas Ortega">

<title>Understanding LendingClub Loan Application Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="blog_files/libs/clipboard/clipboard.min.js"></script>
<script src="blog_files/libs/quarto-html/quarto.js"></script>
<script src="blog_files/libs/quarto-html/popper.min.js"></script>
<script src="blog_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="blog_files/libs/quarto-html/anchor.min.js"></script>
<link href="blog_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="blog_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="blog_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="blog_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="blog_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.12.1.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#lendingclub-loan-applications" id="toc-lendingclub-loan-applications" class="nav-link active" data-scroll-target="#lendingclub-loan-applications">LendingClub Loan Applications</a>
  <ul class="collapse">
  <li><a href="#goals-and-introduction-to-features" id="toc-goals-and-introduction-to-features" class="nav-link" data-scroll-target="#goals-and-introduction-to-features">Goals and Introduction to Features</a></li>
  <li><a href="#preprocessing-the-data" id="toc-preprocessing-the-data" class="nav-link" data-scroll-target="#preprocessing-the-data">Preprocessing the Data</a></li>
  </ul></li>
  <li><a href="#is-employment-length-related-to-the-acceptance-of-loans" id="toc-is-employment-length-related-to-the-acceptance-of-loans" class="nav-link" data-scroll-target="#is-employment-length-related-to-the-acceptance-of-loans">Is employment length related to the acceptance of loans?</a></li>
  <li><a href="#is-there-a-tendency-for-specific-loans-to-be-given-during-certain-months" id="toc-is-there-a-tendency-for-specific-loans-to-be-given-during-certain-months" class="nav-link" data-scroll-target="#is-there-a-tendency-for-specific-loans-to-be-given-during-certain-months">Is there a tendency for specific loans to be given during certain months?</a></li>
  <li><a href="#what-is-the-frequency-of-accepted-and-rejected-loans-throughout-the-united-states" id="toc-what-is-the-frequency-of-accepted-and-rejected-loans-throughout-the-united-states" class="nav-link" data-scroll-target="#what-is-the-frequency-of-accepted-and-rejected-loans-throughout-the-united-states">What is the frequency of accepted and rejected loans throughout the United States?</a></li>
  <li><a href="#does-the-ratio-of-the-amount-funded-over-the-amount-requested-change-based-on-hardship-flag-home-ownership-and-application-type" id="toc-does-the-ratio-of-the-amount-funded-over-the-amount-requested-change-based-on-hardship-flag-home-ownership-and-application-type" class="nav-link" data-scroll-target="#does-the-ratio-of-the-amount-funded-over-the-amount-requested-change-based-on-hardship-flag-home-ownership-and-application-type">Does the ratio of the amount funded over the amount requested change based on hardship flag, home ownership, and application type?</a></li>
  <li><a href="#does-an-applicants-fico-score-change-the-interest-rate-they-receive-what-about-the-funding-requested-ratio" id="toc-does-an-applicants-fico-score-change-the-interest-rate-they-receive-what-about-the-funding-requested-ratio" class="nav-link" data-scroll-target="#does-an-applicants-fico-score-change-the-interest-rate-they-receive-what-about-the-funding-requested-ratio">Does an applicant’s FICO score change the interest rate they receive? What about the funding-requested ratio?</a></li>
  <li><a href="#is-there-a-bound-to-the-debt-to-income-dti-ratio-so-customers-below-a-limit-cannot-be-accepted" id="toc-is-there-a-bound-to-the-debt-to-income-dti-ratio-so-customers-below-a-limit-cannot-be-accepted" class="nav-link" data-scroll-target="#is-there-a-bound-to-the-debt-to-income-dti-ratio-so-customers-below-a-limit-cannot-be-accepted">Is there a bound to the Debt-To-Income (DTI) ratio so customers below a limit cannot be accepted?</a></li>
  <li><a href="#using-the-matching-features-between-accepted-and-rejected-data-can-the-data-effectively-predict-whether-a-candidate-will-be-accepted-or-rejected" id="toc-using-the-matching-features-between-accepted-and-rejected-data-can-the-data-effectively-predict-whether-a-candidate-will-be-accepted-or-rejected" class="nav-link" data-scroll-target="#using-the-matching-features-between-accepted-and-rejected-data-can-the-data-effectively-predict-whether-a-candidate-will-be-accepted-or-rejected">Using the matching features between accepted and rejected data, can the data effectively predict whether a candidate will be accepted or rejected?</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Understanding LendingClub Loan Application Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Spring 2023</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Thomas Ortega </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="lendingclub-loan-applications" class="level1">
<h1>LendingClub Loan Applications</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="loanphoto.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Photo downloaded from Unsplash: Credits - Tierra Mallorca</figcaption><p></p>
</figure>
</div>
<p>LendingClub is a financial technology company that has had over 4 million members since 2007. The ‘fintech’ company offers customers banking and loan opportunities. Something that has interested me in recent years has revolved around understanding how loan applicants are accepted. Through a Kaggle dataset (<span class="citation" data-cites="geor19">George (<a href="#ref-geor19" role="doc-biblioref">2019</a>)</span>), I was able to track loan applicants that applied for loans through LendingClub (reference). The data spans 11 years, from 2007 to 2018, and contains two tables: a rejected and an accepted loan applicant table.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can find the link to my full code and documentation here: <a href="https://github.com/tortega-24/capstone-loan-applicants/tree/main">GitHub Repository</a></p>
</div>
</div>
<p>The accepted applicant table contains approximately 2 million rows and lists over 150 features. The rejected applicant table extends out to about 27 million rows, and has exactly 9 feastures. To understand all of the different features, a separate Kaggle resource was used that identifies the columns that appear in the dataset (<span class="citation" data-cites="chan18">Chan (<a href="#ref-chan18" role="doc-biblioref">2018</a>)</span>).</p>
<section id="goals-and-introduction-to-features" class="level2">
<h2 class="anchored" data-anchor-id="goals-and-introduction-to-features">Goals and Introduction to Features</h2>
<p>Although some features were easy to understand, many columns were entreched in financial terminology or were related to the applicant following their acceptance. My goal for the analysis was to focus on features that were easily understandable, and were characteristics of the customer. By the end of my analysis, I wanted to describe loan applicants and build a model using some of the features. I defined seven different questions that tackled unique aspects of the data.</p>
<p><strong>Question 1:</strong> Is employment length related to the acceptance of loans?</p>
<p><strong>Question 2:</strong> Is there a tendency for specific loans to be given during certain months?</p>
<p><strong>Question 3:</strong> What is the frequency of accepted and rejected loans throughout the United States?</p>
<p><strong>Question 4:</strong> Does the ratio of the amount funded over the amount requested change based on hardship flag, home ownership, and application type?</p>
<p><strong>Question 5:</strong> Does an applicant’s FICO score change the interest rate they receive?</p>
<p><strong>Question 6:</strong> Is there a bound to the Debt-To-Income (DTI) ratio so customers below a limit cannot be accepted?</p>
<p><strong>Question 7:</strong> Using the matching features between accepted and rejected data, can the data effectively predict whether a candidate will be accepted or rejected?</p>
<p><strong>Imports for Project</strong></p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fiona</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> VotingClassifier</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, confusion_matrix</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsClassifier <span class="im">as</span> knn</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math <span class="im">as</span> m</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.outliers_influence <span class="im">import</span> variance_inflation_factor</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">#from plotnine import ggplot, geom_point, aes, stat_smooth, facet_wrap</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="preprocessing-the-data" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing-the-data">Preprocessing the Data</h2>
<p>Before answering the above questions, the data needed to be shaped and organized. A mix of cleaning techniques were used to break the raw csv files into distinct tables: a ZIP Code table, a model table, and an accepted applicant table.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Not every piece of processing code will be displayed. Key decisions and general steps will be listed; however, I want to limit the amount of code listed here and encourage you to visit the repository.</p>
</div>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading Data</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>accepted <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_2007_to_2018Q4.csv"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>rejected <span class="op">=</span> pd.read_csv(<span class="st">"../rejected_2007_to_2018Q4.csv"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Result Column</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>accepted[<span class="st">'Applicant_Result'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>rejected[<span class="st">'Applicant_Result'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The two files being imported are large in size and could not be uploaded to the Github repository.</p>
</div>
</div>
<p>Now that the files have been imported, the first thing I do is create a csv for ZIP Codes. Both raw tables contain applicants’ first three digits of their ZIP Code. A new dataset will combine both ZIP Code columns and applicant result columns. There are a few missing values in the data that will be dropped.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>rejected[<span class="st">'Zip Code'</span>].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(rejected)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>accepted[<span class="st">'zip_code'</span>].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(accepted)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>zip_df <span class="op">=</span> rejected[[<span class="st">'Zip Code'</span>, <span class="st">'Applicant_Result'</span>]].rename(columns<span class="op">=</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                                                           {<span class="st">"Zip Code"</span>: <span class="st">"zip_code"</span>, <span class="st">"Applicant_Result"</span>: <span class="st">"applicant_result"</span>})</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>zip_df <span class="op">=</span> pd.concat([zip_df, accepted[[<span class="st">'zip_code'</span>, <span class="st">'Applicant_Result'</span>]].rename(columns<span class="op">=</span>{<span class="st">"Applicant_Result"</span>: <span class="st">"applicant_result"</span>})]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                   , axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>zip_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>zip_df.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>zip_df.head()</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The next table I will be making pulls accepted loan applications. To clean the columns I defined how many missing values were in each feature. Then, I decided to remove columns that contained at least 30% missing values.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>col_to_be_dropped <span class="op">=</span> []</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> accepted.columns:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (accepted[column].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(accepted)) <span class="op">&gt;</span> <span class="fl">0.3</span>:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        col_to_be_dropped.append(column)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>trimmed_accepted <span class="op">=</span> accepted.drop(col_to_be_dropped, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>trimmed_accepted.shape</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After looking over the columns, I reduced the number of columns even further. I selected columns that would be most related to the questions I planned to answer. Then, I took the percentage of values I would have left if I decided to drop the NA rows. With a remaining 91%, I decided it would be better to drop the missing values instead of attempting to replace them. Lastly, I change the type of the FICO score columns and the policy code to integers. The final table consisted of 17 features.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>columns_needed <span class="op">=</span> [<span class="st">'loan_amnt'</span>, <span class="st">'title'</span>, <span class="st">'last_fico_range_low'</span>, <span class="st">'last_fico_range_high'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'dti'</span>, <span class="st">'zip_code'</span>, <span class="st">'addr_state'</span>, <span class="st">'emp_length'</span>, <span class="st">'emp_title'</span>, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'funded_amnt'</span>, <span class="st">'hardship_flag'</span>, <span class="st">'home_ownership'</span>, <span class="st">'loan_status'</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'application_type'</span>, <span class="st">'issue_d'</span>, <span class="st">'policy_code'</span>, <span class="st">'Applicant_Result'</span>]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># accepted_project_cut = accepted_project.dropna(axis=0)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># len(accepted_project_cut)/len(accepted_project) = 0.9168417229876927</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>accepted_project <span class="op">=</span> trimmed_accepted[columns_needed]</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>accepted_project.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'last_fico_range_low'</span>] <span class="op">=</span> accepted_project[<span class="st">'last_fico_range_low'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'last_fico_range_high'</span>] <span class="op">=</span> accepted_project[<span class="st">'last_fico_range_high'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'policy_code'</span>] <span class="op">=</span> accepted_project[<span class="st">'policy_code'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>accepted_project.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Lastly, I wanted a build a table that combined both accpeted and rejected loan applicants. Of the now 10 columns in the rejected table, added the applicant result, I dropped the Risk_Score column because it contained to many missing values (~18 million). The remaining columns will have their missing values dropped. Another edit that needed to be made was changing the debt-to-income ratio column to be a float type. To do this, I removed the percent sign and converted the type.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>trimmed_rejected <span class="op">=</span> rejected.drop([<span class="st">'Risk_Score'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>] <span class="op">=</span> trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>] <span class="op">=</span> trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>].astype(<span class="st">'float64'</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, I used the sample method to take 100000 rows from each table and concatenated them to form a new table. Finally, all three tables were written as csv files.</p>
</section>
</section>
<section id="is-employment-length-related-to-the-acceptance-of-loans" class="level1">
<h1>Is employment length related to the acceptance of loans?</h1>
<p>To analyze the employment length, I bult a grouped bar chart comparing loan applicants that were accepted and rejected. This was taken using the model data that randomly sampled both candidates.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../model_only_data.csv"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>question_one <span class="op">=</span> df[[<span class="st">'applicant_result'</span>, <span class="st">'emp_length'</span>]]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="bu">len</span>(pd.unique(question_one[<span class="st">'emp_length'</span>])))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> question_one[<span class="st">'emp_length'</span>][question_one[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">1</span>].value_counts().sort_index().values</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> question_one[<span class="st">'emp_length'</span>][question_one[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">0</span>].value_counts().sort_index().values</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>plt.bar(x<span class="op">-</span><span class="fl">0.2</span>, y1, width, color<span class="op">=</span><span class="st">'cyan'</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>plt.bar(x, y2, width, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>plt.xticks(x, question_one[<span class="st">'emp_length'</span>].value_counts().sort_index().index, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Self-Reported Employment Length"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Counts"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Accepted Vs. Rejected Based on Employment Length"</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"Accepted"</span>, <span class="st">"Rejected"</span>])</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-employment" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig-employment-output-1.png" width="610" height="506" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Employment Length</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>To address the immediately obvious elephant in the room, many of the rejected candidates claim that they have been at their job for less than a year. Being honest is usually good for you, but in this case it appears having less than a years experience is detrimental. <a href="#fig-employment">Figure&nbsp;1</a></p>
</section>
<section id="is-there-a-tendency-for-specific-loans-to-be-given-during-certain-months" class="level1">
<h1>Is there a tendency for specific loans to be given during certain months?</h1>
<p>Utilizing natural language processing and some manual identification <span class="citation" data-cites="nlpcode">(<a href="#ref-nlpcode" role="doc-biblioref"><strong>nlpcode?</strong></a>)</span>, I was able to group many of the different reasons applicants applied for loans. This was reflected in a rose chart that is labeled by month and takes all accepted applicant data from 2007-2018.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>group_dates <span class="op">=</span> pd.read_csv(<span class="st">"../group_dates.csv"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar_polar(group_dates, r<span class="op">=</span><span class="st">"count"</span>,theta<span class="op">=</span><span class="st">'issue_month'</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                   color<span class="op">=</span><span class="st">"reduced_reason"</span>, labels<span class="op">=</span>{<span class="st">"reduced_reason"</span>: <span class="st">"Loan Types"</span>})</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">0.80</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="fl">1.1</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    bgcolor<span class="op">=</span><span class="st">"LightGray"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    bordercolor<span class="op">=</span><span class="st">"Black"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    borderwidth<span class="op">=</span><span class="dv">1</span>),font<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="dv">15</span>))</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_nticks<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>fig.update_polars(angularaxis_tickfont_size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_tickfont_size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_angle<span class="op">=</span><span class="dv">70</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_tickangle<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>config <span class="op">=</span> {</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">'toImageButtonOptions'</span>: {</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">'format'</span>: <span class="st">'png'</span>, <span class="co"># one of png, svg, jpeg, webp</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'filename'</span>: <span class="st">'custom_image'</span>,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'height'</span>: <span class="dv">1680</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'width'</span>: <span class="dv">2380</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>fig.show(config<span class="op">=</span>config)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-type" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="214a3ad3-3337-4837-a89a-c47538937d56" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("214a3ad3-3337-4837-a89a-c47538937d56")) {                    Plotly.newPlot(                        "214a3ad3-3337-4837-a89a-c47538937d56",                        [{"hovertemplate":"Loan Types=Business<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Business","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Business","r":[9,2,6,30,73,54,143,263,296,384,449,13,8,12,26,68,61,131,228,334,327,422,14,19,11,36,68,75,158,215,608,400,423,18,17,11,30,71,63,195,275,354,301,417,5,12,9,44,82,83,159,180,332,381,446,3,15,9,34,71,75,160,224,322,321,330,1,4,9,13,42,91,79,254,283,324,354,288,1,6,12,10,57,97,89,152,270,323,441,283,2,6,14,27,59,75,116,92,226,315,424,241,6,3,10,14,60,80,85,323,351,351,424,214,8,14,9,20,54,77,99,216,275,340,513,196,6,10,10,21,56,59,120,110,452,487,515,211],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Car<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Car","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Car","r":[46,49,59,203,449,1272,3624,7753,7421,6705,8134,75,46,81,181,466,1468,3837,5494,8587,5948,7146,76,57,96,196,456,1468,4026,5863,12559,7902,8431,55,61,104,213,496,1544,4491,7811,6993,6065,9857,20,63,120,205,488,1768,4355,7223,5307,7685,11305,5,31,67,111,236,595,1815,4036,6380,6195,7439,10732,17,29,94,160,257,737,1900,6458,11031,6220,7796,11505,19,17,93,169,258,875,2032,3925,8866,6588,8548,11593,10,20,100,122,268,1009,2220,2436,6927,5059,7258,9804,18,21,70,155,300,990,2467,8526,12040,6281,7482,11166,15,39,56,166,344,1025,2861,5463,9130,6926,9012,10147,21,41,65,177,442,997,2924,2339,10743,7029,8101,9227],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Debt/Credit Issues<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Debt/Credit Issues","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Debt/Credit Issues","r":[62,77,159,449,1029,3297,8079,21212,16059,17231,17187,81,80,181,410,1022,3635,8077,13828,19529,14531,15329,109,72,203,405,1081,3852,9242,14574,30654,19279,17796,67,50,233,448,1200,4323,10720,20497,17388,15139,19377,30,77,236,529,1262,4612,10896,18696,13955,19542,20794,3,23,80,277,582,1584,4936,9799,16603,16221,20253,18629,7,26,96,310,597,1975,5454,17507,25774,18167,20824,21389,9,14,128,322,689,2292,5732,11207,19533,18589,22812,22164,14,10,129,318,762,2698,6043,5950,15796,14448,20857,18926,15,25,137,384,772,2830,6550,23142,26480,17771,19103,21523,22,42,155,333,833,2897,6735,14818,20172,18861,20353,19375,34,70,171,368,926,2840,6880,5659,23520,19147,17913,18487],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Home<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Home","marker":{"color":"#ab63fa","pattern":{"shape":""}},"name":"Home","r":[12,12,31,54,117,314,658,1579,1713,2082,2601,11,9,29,64,133,322,732,1118,2206,1936,2423,14,19,43,107,201,481,924,1469,4031,2806,3244,8,19,55,126,217,598,1180,2276,2556,2609,3724,5,25,59,162,247,644,1290,1912,2064,3251,3845,1,5,35,76,172,260,700,1058,1715,2711,3087,3187,3,7,32,52,162,267,694,1665,2817,2485,3090,2690,4,4,19,69,124,288,694,1034,2082,2433,3280,2823,2,2,34,79,137,303,690,617,1832,2021,3142,2145,2,4,46,73,141,274,684,1850,3041,2469,3112,2532,6,14,39,78,125,284,615,1239,2398,2328,3305,2147,9,11,34,70,85,275,636,575,2581,2429,2717,2085],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Major Purchase<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Major Purchase","marker":{"color":"#FFA15A","pattern":{"shape":""}},"name":"Major Purchase","r":[12,6,6,22,29,42,171,478,533,608,961,3,3,10,14,25,57,187,365,723,578,943,6,9,7,19,41,77,242,400,1306,833,1097,2,12,10,21,42,92,315,585,804,684,1172,2,9,6,41,38,75,340,475,629,864,1246,2,12,14,30,38,78,282,445,873,911,1067,1,7,17,29,56,115,433,730,754,926,741,2,10,9,32,60,114,323,632,810,1066,757,1,11,12,40,56,93,196,503,674,925,591,4,6,12,30,56,93,543,804,739,867,658,6,10,23,20,52,97,352,694,723,994,638,3,8,1,18,19,43,119,224,867,839,1126,598],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Medical<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Medical","marker":{"color":"#19d3f3","pattern":{"shape":""}},"name":"Medical","r":[5,3,1,22,26,48,160,250,299,382,528,3,2,2,17,25,36,150,168,381,356,449,3,3,3,14,24,43,138,196,564,478,560,2,3,10,13,38,63,164,270,354,399,607,2,5,12,21,44,57,215,256,318,552,625,7,8,22,32,77,147,202,427,554,510,2,6,9,26,63,61,265,399,376,538,455,3,5,11,23,46,110,160,291,338,618,416,3,17,38,67,82,121,251,352,570,328,8,10,32,61,91,322,464,434,573,410,2,1,2,15,33,67,106,212,376,447,585,410,4,1,4,27,25,43,134,115,471,449,566,378],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Moving<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Moving","marker":{"color":"#FF6692","pattern":{"shape":""}},"name":"Moving","r":[5,8,11,9,31,57,159,165,219,223,4,2,5,8,13,26,55,110,193,183,207,1,5,5,13,19,39,63,124,315,250,246,3,7,10,17,30,49,84,200,251,226,258,1,2,14,18,21,55,98,184,187,327,321,1,1,3,15,19,36,59,87,185,292,329,267,1,5,2,27,25,26,80,168,298,293,354,232,2,3,9,16,32,41,78,129,191,294,360,271,10,21,20,44,83,84,159,229,304,203,1,7,14,21,46,65,236,228,251,264,207,5,8,11,17,33,67,115,197,225,288,164,3,3,3,5,19,38,69,70,236,246,266,185],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Other<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Other","marker":{"color":"#B6E880","pattern":{"shape":""}},"name":"Other","r":[118,91,283,452,598,1329,1365,1434,1416,1839,3057,91,126,271,414,556,1447,498,889,1727,1625,2566,135,111,342,491,740,1651,621,1071,3224,2226,3148,81,128,375,529,866,1958,800,1559,2312,1946,3709,39,120,420,516,919,2136,760,1192,1676,2235,3605,6,38,130,470,533,860,2288,719,1139,2116,2459,3051,18,47,111,507,529,1040,2527,1169,1828,2281,2600,2148,18,35,127,471,522,1260,2786,847,1483,2398,2952,2321,17,12,162,475,533,1367,2727,526,1229,1904,2735,1677,47,49,245,430,534,1430,3000,1615,2072,2193,3057,2000,36,61,271,466,558,1417,3033,1113,1777,2220,3428,1868,72,89,245,487,521,1310,2876,572,2301,2474,3395,1929],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Student<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Student","marker":{"color":"#FF97FF","pattern":{"shape":""}},"name":"Student","r":[12,9,10,10,9,21,13,1,8,9,23,7,14,19,17,10,20,9,8,21,2,11,23,14,13,22,4,21,26,6,8,23,1,2,27,15,8,13,26,5,8,20,11,10,16,35,9,9,16,9,11,14,46,3,1,17,13,6,19,35,8,6,19,7,8,20,29,9,13,21,9,8,29,38,5,6,21,4,2,14,46],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Vacation<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Vacation","marker":{"color":"#FECB52","pattern":{"shape":""}},"name":"Vacation","r":[1,1,1,8,14,15,54,138,133,200,201,2,1,2,4,11,14,57,91,168,198,190,2,5,11,11,20,61,124,327,313,277,1,2,6,10,31,93,166,234,243,304,1,9,17,25,53,85,175,221,384,352,1,3,1,11,18,32,55,113,162,241,452,339,1,3,15,35,59,174,314,323,404,296,1,1,2,7,16,27,57,100,178,285,427,261,3,6,11,31,57,49,126,189,270,190,1,2,8,14,38,46,147,203,218,240,225,2,3,10,26,53,111,166,218,268,215,2,16,12,18,55,58,224,317,286,249],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"},{"hovertemplate":"Loan Types=Wedding<br>count=%{r}<br>issue_month=%{theta}<extra></extra>","legendgroup":"Wedding","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Wedding","r":[8,11,16,38,37,54,35,7,9,12,42,27,63,2,12,9,28,49,50,84,5,14,36,49,61,108,2,4,10,26,32,77,110,1,8,16,36,60,81,89,1,6,18,35,53,92,116,2,3,15,35,53,100,138,3,12,33,61,102,114,2,4,13,38,48,74,76,4,5,19,35,56,86,58,5,6,15,46,26,61,64],"showlegend":true,"subplot":"polar","theta":["Jan","Jan","Jan","Jan","Jan","Jan","Jan","Feb","Feb","Feb","Feb","Feb","Feb","Feb","Mar","Mar","Mar","Mar","Mar","Mar","Apr","Apr","Apr","Apr","Apr","Apr","Apr","May","May","May","May","May","May","Jun","Jun","Jun","Jun","Jun","Jun","Jun","Jul","Jul","Jul","Jul","Jul","Jul","Jul","Aug","Aug","Aug","Aug","Aug","Aug","Aug","Sep","Sep","Sep","Sep","Sep","Sep","Oct","Oct","Oct","Oct","Oct","Oct","Oct","Nov","Nov","Nov","Nov","Nov","Nov","Nov","Dec","Dec","Dec","Dec","Dec","Dec","Dec"],"type":"barpolar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"polar":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"angularaxis":{"direction":"clockwise","rotation":90,"tickfont":{"size":15}},"radialaxis":{"nticks":11,"tickfont":{"size":15},"angle":70,"tickangle":90}},"legend":{"title":{"text":"Loan Types"},"tracegroupgap":0,"yanchor":"top","y":0.8,"xanchor":"left","x":1.1,"bgcolor":"LightGray","bordercolor":"Black","borderwidth":1},"margin":{"t":60},"barmode":"relative","font":{"size":15}},                        {"toImageButtonOptions": {"format": "png", "filename": "custom_image", "height": 1680, "width": 2380}, "responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('214a3ad3-3337-4837-a89a-c47538937d56');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Loan Type</figcaption><p></p>
</figure>
</div>
</div>
<p>Looking at the rose chart <a href="#fig-type">Figure&nbsp;2</a>, we can observe a couple things. Firstly, three of the 12 months have a noticeable drop in overall accepted applicant counts. Why is there a drop? It is not entirely clear. Nothing jumps out as an explanation while doing some Googling. It might be a situation unique to LendingClub.</p>
<p>However, I can shed some light on whether the pattern is consistent for each year or different. By creating a gif, we can observe the yearly changes in counts by month.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="loantypes.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Different LendingClub Loan Applications by Month and Year</figcaption><p></p>
</figure>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that the gif ranges from 2008 to 2018. It does not cover 2007 because LendingClub had small counts for that year and did not accept candidates in every month.</p>
</div>
</div>
</section>
<section id="what-is-the-frequency-of-accepted-and-rejected-loans-throughout-the-united-states" class="level1">
<h1>What is the frequency of accepted and rejected loans throughout the United States?</h1>
<p>LendingClub has had over <a href="https://ir.lendingclub.com/news/news-details/2022/LendingClub-Surpasses-4-Million-Members/default.aspx">4 million members</a> since 2007 stemming from across the United States. So, what does the acceptance rate look like across the U.S.? Using census data, I made a choropleth graphic visualizing the acceptance rate across 48 of the states–sorry Alaska and Hawaii. Alaska and Hawaii citizens can apply for loans via LendingClub; but, they are not included because it stretches the choropleth.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_map_2015 <span class="op">=</span> gpd.read_file(<span class="st">'../2015_map_data.shp'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>matplotlib.rcParams[<span class="st">'font.size'</span>] <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">50</span>, <span class="dv">50</span>))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>df_map_2015.plot(column <span class="op">=</span> df_map_2015[<span class="st">'accepted_rejected_ratio'</span>], cmap<span class="op">=</span><span class="st">'viridis'</span>, legend<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">"Ratio of Accepted Applicants"</span>, <span class="st">'orientation'</span>: <span class="st">"horizontal"</span>, <span class="st">"pad"</span>: <span class="fl">0.01</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"shrink"</span>: <span class="fl">.7</span>}, ax<span class="op">=</span>ax, alpha<span class="op">=</span><span class="fl">.9</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="op">-</span><span class="dv">126</span>, <span class="op">-</span><span class="dv">65</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">24</span>, <span class="dv">50</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>plt.title</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The interesting thing that stands out is the large, scary space outlining the state of Iowa. As of the dates collected from the Kaggle dataset, Iowa did not allow their citizens to apply for loans with LendingClub. This is the most likely explanation for the very abismal acceptance rate.</p>
</section>
<section id="does-the-ratio-of-the-amount-funded-over-the-amount-requested-change-based-on-hardship-flag-home-ownership-and-application-type" class="level1">
<h1>Does the ratio of the amount funded over the amount requested change based on hardship flag, home ownership, and application type?</h1>
<p>Loan applicants that are approved for loans must have differences between each other–right? To take a further look, I describe applicants by their home status, whether they filed jointly or not, and if they have had to reduce their payment plans in the past (hardhip flag). These features will then be used to order applicants based on their median FICO scores and debt-to-income ratios.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df_new <span class="op">=</span> df[<span class="op">~</span>df[<span class="st">'home_ownership'</span>].isin([<span class="st">'OTHER'</span>, <span class="st">'ANY'</span>, <span class="st">'NONE'</span>])]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>grouped_values <span class="op">=</span> df_new.groupby([<span class="st">'home_ownership'</span>, <span class="st">'application_type'</span>, <span class="st">'hardship_flag'</span>])[<span class="st">'fico_range_low'</span>].median()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>grouped_values <span class="op">=</span>pd.DataFrame(grouped_values)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>grouped_values.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>grouped_values.sort_values(by<span class="op">=</span><span class="st">'fico_range_low'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>home_ownership</th>
      <th>application_type</th>
      <th>hardship_flag</th>
      <th>fico_range_low</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7</th>
      <td>OWN</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>720.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>OWN</td>
      <td>Joint App</td>
      <td>N</td>
      <td>710.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>MORTGAGE</td>
      <td>Joint App</td>
      <td>N</td>
      <td>705.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MORTGAGE</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>700.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>RENT</td>
      <td>Joint App</td>
      <td>N</td>
      <td>700.0</td>
    </tr>
    <tr>
      <th>0</th>
      <td>MORTGAGE</td>
      <td>Individual</td>
      <td>N</td>
      <td>695.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>OWN</td>
      <td>Individual</td>
      <td>N</td>
      <td>690.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>RENT</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>690.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MORTGAGE</td>
      <td>Individual</td>
      <td>Y</td>
      <td>685.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>OWN</td>
      <td>Individual</td>
      <td>Y</td>
      <td>685.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>RENT</td>
      <td>Individual</td>
      <td>N</td>
      <td>685.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>RENT</td>
      <td>Individual</td>
      <td>Y</td>
      <td>680.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_new <span class="op">=</span> df[<span class="op">~</span>df[<span class="st">'home_ownership'</span>].isin([<span class="st">'OTHER'</span>, <span class="st">'ANY'</span>, <span class="st">'NONE'</span>])]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>grouped_values_dti <span class="op">=</span> df_new.groupby([<span class="st">'home_ownership'</span>, <span class="st">'application_type'</span>, <span class="st">'hardship_flag'</span>])[<span class="st">'dti'</span>].median()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>grouped_values_dti <span class="op">=</span> pd.DataFrame(grouped_values_dti)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>grouped_values_dti.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>grouped_values_dti.sort_values(by<span class="op">=</span><span class="st">'dti'</span>, ascending<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>home_ownership</th>
      <th>application_type</th>
      <th>hardship_flag</th>
      <th>dti</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7</th>
      <td>OWN</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>11.900</td>
    </tr>
    <tr>
      <th>8</th>
      <td>RENT</td>
      <td>Individual</td>
      <td>N</td>
      <td>17.300</td>
    </tr>
    <tr>
      <th>9</th>
      <td>RENT</td>
      <td>Individual</td>
      <td>Y</td>
      <td>17.490</td>
    </tr>
    <tr>
      <th>0</th>
      <td>MORTGAGE</td>
      <td>Individual</td>
      <td>N</td>
      <td>17.610</td>
    </tr>
    <tr>
      <th>5</th>
      <td>OWN</td>
      <td>Individual</td>
      <td>Y</td>
      <td>17.700</td>
    </tr>
    <tr>
      <th>4</th>
      <td>OWN</td>
      <td>Individual</td>
      <td>N</td>
      <td>18.060</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MORTGAGE</td>
      <td>Individual</td>
      <td>Y</td>
      <td>19.560</td>
    </tr>
    <tr>
      <th>11</th>
      <td>RENT</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>20.770</td>
    </tr>
    <tr>
      <th>6</th>
      <td>OWN</td>
      <td>Joint App</td>
      <td>N</td>
      <td>23.125</td>
    </tr>
    <tr>
      <th>10</th>
      <td>RENT</td>
      <td>Joint App</td>
      <td>N</td>
      <td>23.535</td>
    </tr>
    <tr>
      <th>2</th>
      <td>MORTGAGE</td>
      <td>Joint App</td>
      <td>N</td>
      <td>25.240</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MORTGAGE</td>
      <td>Joint App</td>
      <td>Y</td>
      <td>25.800</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>For the top three FICO scores, candidates eithered owned or mortgaged a home. All of the top three filed jointly. The top three lowest dti scores had applicants that rented or owned, filed either individually or jointly, and did or did not have a hardship flag.</p>
</section>
<section id="does-an-applicants-fico-score-change-the-interest-rate-they-receive-what-about-the-funding-requested-ratio" class="level1">
<h1>Does an applicant’s FICO score change the interest rate they receive? What about the funding-requested ratio?</h1>
<p>Okay, let’s say you’ve been approved for a loan. Now, the problem is the interest rate. This will effect how much your monthly payment will be. Thankfully, I can track interest rates. Using the accepted loan applicants, I can find the interest rates people received. Since FICO scores seem to be a widely used metric, I grouped applicants by their FICO score.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>fico_fair_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">580</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">669</span>)]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>fico_good_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">670</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">739</span>)]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>fico_very_good_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">740</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">799</span>)]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">800</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">850</span>)]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>fico_fair_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>fico_good_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>fico_very_good_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>fico_fair_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Fair"</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>fico_good_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Good"</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>fico_very_good_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Very Good"</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Exceptional"</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> pd.concat([fico_fair_df, fico_good_df, fico_very_good_df, fico_exceptional_df], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>new_df[[<span class="st">'month'</span>, <span class="st">'year'</span>]] <span class="op">=</span> new_df[<span class="st">'issue_d'</span>].<span class="bu">str</span>.split(<span class="st">"-"</span>, expand<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>new_df[<span class="st">'issue_d'</span>] <span class="op">=</span> pd.to_datetime(new_df[<span class="st">'issue_d'</span>])</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>data_two <span class="op">=</span> new_df[new_df[<span class="st">'year'</span>] <span class="op">==</span> <span class="st">"2018"</span>]</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>grouped_two <span class="op">=</span> data_two.groupby([<span class="st">'issue_d'</span>, <span class="st">'fico_category'</span>])[<span class="st">'int_rate'</span>].median()</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>ggplot(grouped_two.reset_index(), aes(x<span class="op">=</span><span class="st">'issue_d'</span>, y<span class="op">=</span><span class="st">'int_rate'</span>, group<span class="op">=</span><span class="st">'fico_category'</span>)) <span class="op">+</span> geom_line() <span class="op">+</span> geom_point(color<span class="op">=</span><span class="st">"red"</span>, size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="interestrate.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Different LendingClub Loan Applications by Month and Year</figcaption><p></p>
</figure>
</div>
</section>
<section id="is-there-a-bound-to-the-debt-to-income-dti-ratio-so-customers-below-a-limit-cannot-be-accepted" class="level1">
<h1>Is there a bound to the Debt-To-Income (DTI) ratio so customers below a limit cannot be accepted?</h1>
<p>Although you can apply for a loan, you do not necessarily know how your financial status plays a role. DTI or debt-to-income is designed to compare income versus debt. If you have a high ratio, it might be reasonable to assume that you are more unlikely to receive a loan. Let’s take a look:</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>model_df <span class="op">=</span> pd.read_csv(<span class="st">"../model_only_data.csv"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>graph_df <span class="op">=</span> model_df[[<span class="st">'debt_to_income_ratio'</span>, <span class="st">'applicant_result'</span>]][model_df[<span class="st">'debt_to_income_ratio'</span>] <span class="op">&lt;=</span> <span class="dv">100</span>]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>counts, edges, bars <span class="op">=</span> ax.hist([graph_df[<span class="st">'debt_to_income_ratio'</span>][graph_df[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">0</span>],</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>          graph_df[<span class="st">'debt_to_income_ratio'</span>][graph_df[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">1</span>]], histtype<span class="op">=</span><span class="st">'barstacked'</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                              label<span class="op">=</span>[<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>ax.legend(prop<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">10</span>})</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Accepted and Rejected Debt-To-Income-Ratio'</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>plt.xticks([<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">80</span>,<span class="dv">90</span>,<span class="dv">100</span>])</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>plt.yticks([<span class="dv">0</span>,<span class="dv">10000</span>,<span class="dv">20000</span>,<span class="dv">30000</span>,<span class="dv">40000</span>,<span class="dv">50000</span>,<span class="dv">60000</span>,<span class="dv">70000</span>])</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars[<span class="dv">0</span>], padding<span class="op">=-</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars[<span class="dv">1</span>], padding<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="blog_files/figure-html/cell-7-output-1.png" width="592" height="431"></p>
</div>
</div>
</section>
<section id="using-the-matching-features-between-accepted-and-rejected-data-can-the-data-effectively-predict-whether-a-candidate-will-be-accepted-or-rejected" class="level1">
<h1>Using the matching features between accepted and rejected data, can the data effectively predict whether a candidate will be accepted or rejected?</h1>
<p>Using three classification models, I will building an ensemble model to test the ability to predict an applicant’s acceptance.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ModelChart.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Model Diagram</figcaption><p></p>
</figure>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>knn_new <span class="op">=</span> knn(n_neighbors<span class="op">=</span>m.ceil((<span class="bu">len</span>(pred_std_train))<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>algorithm_knn <span class="op">=</span> knn_new.fit(pred_std_train, tar_std_train)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>clf <span class="op">=</span> LogisticRegression(random_state<span class="op">=</span><span class="dv">42</span>).fit(pred_std_train, tar_std_train)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>tree_clf <span class="op">=</span> DecisionTreeClassifier(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>algorithm_tree <span class="op">=</span> tree_clf.fit(pred_std_train, tar_std_train)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>voting_clf_best_of_all <span class="op">=</span> VotingClassifier(estimators<span class="op">=</span>[(<span class="st">'knn'</span>, algorithm_knn), (<span class="st">'lr'</span>, clf), (<span class="st">'dt'</span>, algorithm_tree)], </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                                          voting<span class="op">=</span><span class="st">'soft'</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>algorithm_ens <span class="op">=</span> voting_clf_best_of_all.fit(pred_std_train, tar_std_train)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>ensemble_hard <span class="op">=</span> algorithm_ens.predict(pred_std_test)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Model Equations</strong></p>
<p>To test the model’s effectiveness, three metrics will be used. Precision, recall, and accuracy.</p>
<p><span class="math display">\[Precision = TP/(TP+FP)\]</span></p>
<p><span class="math display">\[Recall = TP/(TP+FN)\]</span></p>
<p><span class="math display">\[Accuracy = (TP+TN)/(TP+FP+TN+FN)\]</span></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">'True Neg'</span>,<span class="st">'False Pos'</span>,<span class="st">'False Neg'</span>,<span class="st">'True Pos'</span>]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> [<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>cm_ens <span class="op">=</span> confusion_matrix(tar_std_test, ensemble_hard)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>group_counts <span class="op">=</span> [<span class="st">'</span><span class="sc">{0:0.0f}</span><span class="st">'</span>.<span class="bu">format</span>(value) <span class="cf">for</span> value <span class="kw">in</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                cm_ens.flatten()]</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="ss">f'</span><span class="sc">{</span>v1<span class="sc">}</span><span class="ch">\n</span><span class="sc">{</span>v2<span class="sc">}</span><span class="ss">'</span> <span class="cf">for</span> v1, v2 <span class="kw">in</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>          <span class="bu">zip</span>(labels,group_counts)]</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> np.asarray(labels).reshape(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>disp_ens <span class="op">=</span> ConfusionMatrixDisplay(confusion_matrix<span class="op">=</span>cm_ens)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>), dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale up the size of all text</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(font_scale <span class="op">=</span> <span class="fl">1.1</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.heatmap(cm_ens, annot<span class="op">=</span>labels, fmt<span class="op">=</span><span class="st">''</span>, cmap<span class="op">=</span><span class="st">'Oranges'</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># set x-axis label and ticks. </span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Predicted"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, labelpad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_ticklabels([<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co"># set y-axis label and ticks</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Actual"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, labelpad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_ticklabels([<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Confusion Matrix for Loan Applications"</span>, fontsize<span class="op">=</span><span class="dv">20</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="results_model.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Ensemble Method Confusion Matrix</figcaption><p></p>
</figure>
</div>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that there are five types of callouts, including: <code>note</code>, <code>tip</code>, <code>warning</code>, <code>caution</code>, and <code>important</code>.</p>
</div>
</div>
<!-- -->


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-chan18" class="csl-entry" role="doc-biblioentry">
Chan, Jonathan. 2018. <span>“Lending Club Data Dictionary.”</span> Kaggle. 2018. <a href="https://www.kaggle.com/datasets/jonchan2003/lending-club-data-dictionary?select=Lending+Club+Data+Dictionary+Approved.csv">https://www.kaggle.com/datasets/jonchan2003/lending-club-data-dictionary?select=Lending+Club+Data+Dictionary+Approved.csv</a>.
</div>
<div id="ref-geor19" class="csl-entry" role="doc-biblioentry">
George, Nathan. 2019. <span>“All Lending Club Loan Data.”</span> Kaggle. 2019. <a href="https://www.kaggle.com/datasets/wordsforthewise/lending-club?select=accepted_2007_to_2018Q4.csv.gz">https://www.kaggle.com/datasets/wordsforthewise/lending-club?select=accepted_2007_to_2018Q4.csv.gz</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb16" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Understanding LendingClub Loan Application Data"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Spring 2023"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Thomas Ortega"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> references.bib</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> false</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: simplex</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">    rendering: embed-resources</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf: default</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="fu"># LendingClub Loan Applications</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="al">![Photo downloaded from Unsplash: Credits - Tierra Mallorca](loanphoto.jpg)</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>LendingClub is a financial technology company that has had over 4 million members since 2007. The 'fintech' company offers customers banking and loan opportunities. Something that has interested me in recent years has revolved around understanding how loan applicants are accepted. Through a Kaggle dataset (@geor19), I was able to track loan applicants that applied for loans through LendingClub (reference). The data spans 11 years, from 2007 to 2018, and contains two tables: a rejected and an accepted loan applicant table.</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>You can find the link to my full code and documentation here: <span class="co">[</span><span class="ot">GitHub Repository</span><span class="co">](https://github.com/tortega-24/capstone-loan-applicants/tree/main)</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>The accepted applicant table contains approximately 2 million rows and lists over 150 features. The rejected applicant table extends out to about 27 million rows, and has exactly 9 feastures. To understand all of the different features, a separate Kaggle resource was used that identifies the columns that appear in the dataset (@chan18).  </span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="fu">## Goals and Introduction to Features</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>Although some features were easy to understand, many columns were entreched in financial terminology or were related to the applicant following their acceptance. My goal for the analysis was to focus on features that were easily understandable, and were characteristics of the customer. By the end of my analysis, I wanted to describe loan applicants and build a model using some of the features. I defined seven different questions that tackled unique aspects of the data.</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>**Question 1:** Is employment length related to the acceptance of loans?</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>**Question 2:** Is there a tendency for specific loans to be given during certain months?</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>**Question 3:** What is the frequency of accepted and rejected loans throughout the United States? </span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>**Question 4:** Does the ratio of the amount funded over the amount requested change based on hardship flag, home ownership, and application type?</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>**Question 5:** Does an applicant's FICO score change the interest rate they receive?</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>**Question 6:** Is there a bound to the Debt-To-Income (DTI) ratio so customers below a limit cannot be accepted?</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>**Question 7:** Using the matching features between accepted and rejected data, can the data effectively predict whether a candidate will be accepted or rejected?</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>**Imports for Project**</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fiona</span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> VotingClassifier</span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, confusion_matrix</span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsClassifier <span class="im">as</span> knn</span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math <span class="im">as</span> m</span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.outliers_influence <span class="im">import</span> variance_inflation_factor</span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing</span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a><span class="co">#from plotnine import ggplot, geom_point, aes, stat_smooth, facet_wrap</span></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preprocessing the Data</span></span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a>Before answering the above questions, the data needed to be shaped and organized. A mix of cleaning techniques were used to break the raw csv files into distinct tables: a ZIP Code table, a model table, and an accepted applicant table.</span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>:::{.callout-important}</span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a>Not every piece of processing code will be displayed. Key decisions and general steps will be listed; however, I want to limit the amount of code listed here and encourage you to visit the repository.</span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading Data</span></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a>accepted <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_2007_to_2018Q4.csv"</span>)</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>rejected <span class="op">=</span> pd.read_csv(<span class="st">"../rejected_2007_to_2018Q4.csv"</span>)</span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding Result Column</span></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a>accepted[<span class="st">'Applicant_Result'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a>rejected[<span class="st">'Applicant_Result'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a>The two files being imported are large in size and could not be uploaded to the Github repository.</span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a>Now that the files have been imported, the first thing I do is create a csv for ZIP Codes. Both raw tables contain applicants' first three digits of their ZIP Code. A new dataset will combine both ZIP Code columns and applicant result columns. There are a few missing values in the data that will be dropped.</span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a>rejected[<span class="st">'Zip Code'</span>].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(rejected)</span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a>accepted[<span class="st">'zip_code'</span>].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(accepted)</span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a>zip_df <span class="op">=</span> rejected[[<span class="st">'Zip Code'</span>, <span class="st">'Applicant_Result'</span>]].rename(columns<span class="op">=</span></span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>                                                           {<span class="st">"Zip Code"</span>: <span class="st">"zip_code"</span>, <span class="st">"Applicant_Result"</span>: <span class="st">"applicant_result"</span>})</span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a>zip_df <span class="op">=</span> pd.concat([zip_df, accepted[[<span class="st">'zip_code'</span>, <span class="st">'Applicant_Result'</span>]].rename(columns<span class="op">=</span>{<span class="st">"Applicant_Result"</span>: <span class="st">"applicant_result"</span>})]</span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a>                   , axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>zip_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>zip_df.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a>zip_df.head()</span>
<span id="cb16-117"><a href="#cb16-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-118"><a href="#cb16-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a>The next table I will be making pulls accepted loan applications. To clean the columns I defined how many missing values were in each feature. Then, I decided to remove columns that contained at least 30% missing values.</span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a>col_to_be_dropped <span class="op">=</span> []</span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> accepted.columns:</span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (accepted[column].isnull().<span class="bu">sum</span>()<span class="op">/</span><span class="bu">len</span>(accepted)) <span class="op">&gt;</span> <span class="fl">0.3</span>:</span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a>        col_to_be_dropped.append(column)</span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a>trimmed_accepted <span class="op">=</span> accepted.drop(col_to_be_dropped, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a>trimmed_accepted.shape</span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a>After looking over the columns, I reduced the number of columns even further. I selected columns that would be most related to the questions I planned to answer. Then, I took the percentage of values I would have left if I decided to drop the NA rows. With a remaining 91%, I decided it would be better to drop the missing values instead of attempting to replace them. Lastly, I change the type of the FICO score columns and the policy code to integers. The final table consisted of 17 features.</span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a>columns_needed <span class="op">=</span> [<span class="st">'loan_amnt'</span>, <span class="st">'title'</span>, <span class="st">'last_fico_range_low'</span>, <span class="st">'last_fico_range_high'</span>,</span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'dti'</span>, <span class="st">'zip_code'</span>, <span class="st">'addr_state'</span>, <span class="st">'emp_length'</span>, <span class="st">'emp_title'</span>, </span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'funded_amnt'</span>, <span class="st">'hardship_flag'</span>, <span class="st">'home_ownership'</span>, <span class="st">'loan_status'</span>, </span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'application_type'</span>, <span class="st">'issue_d'</span>, <span class="st">'policy_code'</span>, <span class="st">'Applicant_Result'</span>]</span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a><span class="co"># accepted_project_cut = accepted_project.dropna(axis=0)</span></span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a><span class="co"># len(accepted_project_cut)/len(accepted_project) = 0.9168417229876927</span></span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a>accepted_project <span class="op">=</span> trimmed_accepted[columns_needed]</span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a>accepted_project.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'last_fico_range_low'</span>] <span class="op">=</span> accepted_project[<span class="st">'last_fico_range_low'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'last_fico_range_high'</span>] <span class="op">=</span> accepted_project[<span class="st">'last_fico_range_high'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a>accepted_project[<span class="st">'policy_code'</span>] <span class="op">=</span> accepted_project[<span class="st">'policy_code'</span>].astype(<span class="st">'int64'</span>)</span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a>accepted_project.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a>Lastly, I wanted a build a table that combined both accpeted and rejected loan applicants. Of the now 10 columns in the rejected table, added the applicant result, I dropped the Risk_Score column because it contained to many missing values (~18 million). The remaining columns will have their missing values dropped. Another edit that needed to be made was changing the debt-to-income ratio column to be a float type. To do this, I removed the percent sign and converted the type. </span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a>trimmed_rejected <span class="op">=</span> rejected.drop([<span class="st">'Risk_Score'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a>trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>] <span class="op">=</span> trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a>trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>] <span class="op">=</span> trimmed_rejected[<span class="st">'Debt-To-Income Ratio'</span>].astype(<span class="st">'float64'</span>)</span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a>Next, I used the sample method to take 100000 rows from each table and concatenated them to form a new table. Finally, all three tables were written as csv files.</span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a><span class="fu"># Is employment length related to the acceptance of loans?</span></span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a>To analyze the employment length, I bult a grouped bar chart comparing loan applicants that were accepted and rejected. This was taken using the model data that randomly sampled both candidates.</span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-employment</span></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Employment Length"</span></span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../model_only_data.csv"</span>)</span>
<span id="cb16-175"><a href="#cb16-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-176"><a href="#cb16-176" aria-hidden="true" tabindex="-1"></a>question_one <span class="op">=</span> df[[<span class="st">'applicant_result'</span>, <span class="st">'emp_length'</span>]]</span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="bu">len</span>(pd.unique(question_one[<span class="st">'emp_length'</span>])))</span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> question_one[<span class="st">'emp_length'</span>][question_one[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">1</span>].value_counts().sort_index().values</span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> question_one[<span class="st">'emp_length'</span>][question_one[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">0</span>].value_counts().sort_index().values</span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a>plt.bar(x<span class="op">-</span><span class="fl">0.2</span>, y1, width, color<span class="op">=</span><span class="st">'cyan'</span>)</span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a>plt.bar(x, y2, width, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a>plt.xticks(x, question_one[<span class="st">'emp_length'</span>].value_counts().sort_index().index, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Self-Reported Employment Length"</span>)</span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Counts"</span>)</span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Accepted Vs. Rejected Based on Employment Length"</span>)</span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">"Accepted"</span>, <span class="st">"Rejected"</span>])</span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a>To address the immediately obvious elephant in the room, many of the rejected candidates claim that they have been at their job for less than a year. Being honest is usually good for you, but in this case it appears having less than a years experience is detrimental. @fig-employment</span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a><span class="fu"># Is there a tendency for specific loans to be given during certain months?</span></span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a>Utilizing natural language processing and some manual identification @nlpcode, I was able to group many of the different reasons applicants applied for loans. This was reflected in a rose chart that is labeled by month and takes all accepted applicant data from 2007-2018.</span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-type</span></span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Loan Type"</span></span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a>group_dates <span class="op">=</span> pd.read_csv(<span class="st">"../group_dates.csv"</span>)</span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar_polar(group_dates, r<span class="op">=</span><span class="st">"count"</span>,theta<span class="op">=</span><span class="st">'issue_month'</span>,</span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a>                   color<span class="op">=</span><span class="st">"reduced_reason"</span>, labels<span class="op">=</span>{<span class="st">"reduced_reason"</span>: <span class="st">"Loan Types"</span>})</span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">0.80</span>,</span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="fl">1.1</span>,</span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a>    bgcolor<span class="op">=</span><span class="st">"LightGray"</span>,</span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a>    bordercolor<span class="op">=</span><span class="st">"Black"</span>,</span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a>    borderwidth<span class="op">=</span><span class="dv">1</span>),font<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="dv">15</span>))</span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_nticks<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb16-219"><a href="#cb16-219" aria-hidden="true" tabindex="-1"></a>fig.update_polars(angularaxis_tickfont_size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb16-220"><a href="#cb16-220" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_tickfont_size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb16-221"><a href="#cb16-221" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_angle<span class="op">=</span><span class="dv">70</span>)</span>
<span id="cb16-222"><a href="#cb16-222" aria-hidden="true" tabindex="-1"></a>fig.update_polars(radialaxis_tickangle<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb16-223"><a href="#cb16-223" aria-hidden="true" tabindex="-1"></a>config <span class="op">=</span> {</span>
<span id="cb16-224"><a href="#cb16-224" aria-hidden="true" tabindex="-1"></a>  <span class="st">'toImageButtonOptions'</span>: {</span>
<span id="cb16-225"><a href="#cb16-225" aria-hidden="true" tabindex="-1"></a>    <span class="st">'format'</span>: <span class="st">'png'</span>, <span class="co"># one of png, svg, jpeg, webp</span></span>
<span id="cb16-226"><a href="#cb16-226" aria-hidden="true" tabindex="-1"></a>    <span class="st">'filename'</span>: <span class="st">'custom_image'</span>,</span>
<span id="cb16-227"><a href="#cb16-227" aria-hidden="true" tabindex="-1"></a>    <span class="st">'height'</span>: <span class="dv">1680</span>,</span>
<span id="cb16-228"><a href="#cb16-228" aria-hidden="true" tabindex="-1"></a>    <span class="st">'width'</span>: <span class="dv">2380</span></span>
<span id="cb16-229"><a href="#cb16-229" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-230"><a href="#cb16-230" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-231"><a href="#cb16-231" aria-hidden="true" tabindex="-1"></a>fig.show(config<span class="op">=</span>config)</span>
<span id="cb16-232"><a href="#cb16-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-233"><a href="#cb16-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-234"><a href="#cb16-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-235"><a href="#cb16-235" aria-hidden="true" tabindex="-1"></a>Looking at the rose chart @fig-type, we can observe a couple things. Firstly, three of the 12 months have a noticeable drop in overall accepted applicant counts. Why is there a drop? It is not entirely clear. Nothing jumps out as an explanation while doing some Googling. It might be a situation unique to LendingClub. </span>
<span id="cb16-236"><a href="#cb16-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-237"><a href="#cb16-237" aria-hidden="true" tabindex="-1"></a>However, I can shed some light on whether the pattern is consistent for each year or different. By creating a gif, we can observe the yearly changes in counts by month.</span>
<span id="cb16-238"><a href="#cb16-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-239"><a href="#cb16-239" aria-hidden="true" tabindex="-1"></a><span class="al">![Different LendingClub Loan Applications by Month and Year](loantypes.gif)</span></span>
<span id="cb16-240"><a href="#cb16-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-241"><a href="#cb16-241" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb16-242"><a href="#cb16-242" aria-hidden="true" tabindex="-1"></a>Note that the gif ranges from 2008 to 2018. It does not cover 2007 because LendingClub had small counts for that year and did not accept candidates in every month.</span>
<span id="cb16-243"><a href="#cb16-243" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-244"><a href="#cb16-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-245"><a href="#cb16-245" aria-hidden="true" tabindex="-1"></a><span class="fu"># What is the frequency of accepted and rejected loans throughout the United States?</span></span>
<span id="cb16-246"><a href="#cb16-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-247"><a href="#cb16-247" aria-hidden="true" tabindex="-1"></a>LendingClub has had over <span class="co">[</span><span class="ot">4 million members</span><span class="co">](https://ir.lendingclub.com/news/news-details/2022/LendingClub-Surpasses-4-Million-Members/default.aspx)</span> since 2007 stemming from across the United States. So, what does the acceptance rate look like across the U.S.? Using census data, I made a choropleth graphic visualizing the acceptance rate across 48 of the states–sorry Alaska and Hawaii. Alaska and Hawaii citizens can apply for loans via LendingClub; but, they are not included because it stretches the choropleth.</span>
<span id="cb16-248"><a href="#cb16-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-249"><a href="#cb16-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-250"><a href="#cb16-250" aria-hidden="true" tabindex="-1"></a>df_map_2015 <span class="op">=</span> gpd.read_file(<span class="st">'../2015_map_data.shp'</span>)</span>
<span id="cb16-251"><a href="#cb16-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-252"><a href="#cb16-252" aria-hidden="true" tabindex="-1"></a>matplotlib.rcParams[<span class="st">'font.size'</span>] <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb16-253"><a href="#cb16-253" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">50</span>, <span class="dv">50</span>))</span>
<span id="cb16-254"><a href="#cb16-254" aria-hidden="true" tabindex="-1"></a>df_map_2015.plot(column <span class="op">=</span> df_map_2015[<span class="st">'accepted_rejected_ratio'</span>], cmap<span class="op">=</span><span class="st">'viridis'</span>, legend<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb16-255"><a href="#cb16-255" aria-hidden="true" tabindex="-1"></a>            legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">"Ratio of Accepted Applicants"</span>, <span class="st">'orientation'</span>: <span class="st">"horizontal"</span>, <span class="st">"pad"</span>: <span class="fl">0.01</span>,</span>
<span id="cb16-256"><a href="#cb16-256" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"shrink"</span>: <span class="fl">.7</span>}, ax<span class="op">=</span>ax, alpha<span class="op">=</span><span class="fl">.9</span>)</span>
<span id="cb16-257"><a href="#cb16-257" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="op">-</span><span class="dv">126</span>, <span class="op">-</span><span class="dv">65</span>)</span>
<span id="cb16-258"><a href="#cb16-258" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">24</span>, <span class="dv">50</span>)</span>
<span id="cb16-259"><a href="#cb16-259" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb16-260"><a href="#cb16-260" aria-hidden="true" tabindex="-1"></a>plt.title</span>
<span id="cb16-261"><a href="#cb16-261" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb16-262"><a href="#cb16-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-263"><a href="#cb16-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-264"><a href="#cb16-264" aria-hidden="true" tabindex="-1"></a>The interesting thing that stands out is the large, scary space outlining the state of Iowa. As of the dates collected from the Kaggle dataset, Iowa did not allow their citizens to apply for loans with LendingClub. This is the most likely explanation for the very abismal acceptance rate.</span>
<span id="cb16-265"><a href="#cb16-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-266"><a href="#cb16-266" aria-hidden="true" tabindex="-1"></a><span class="fu"># Does the ratio of the amount funded over the amount requested change based on hardship flag, home ownership, and application type?</span></span>
<span id="cb16-267"><a href="#cb16-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-268"><a href="#cb16-268" aria-hidden="true" tabindex="-1"></a>Loan applicants that are approved for loans must have differences between each other–right? To take a further look, I describe applicants by their home status, whether they filed jointly or not, and if they have had to reduce their payment plans in the past (hardhip flag). These features will then be used to order applicants based on their median FICO scores and debt-to-income ratios.</span>
<span id="cb16-269"><a href="#cb16-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-272"><a href="#cb16-272" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-273"><a href="#cb16-273" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb16-274"><a href="#cb16-274" aria-hidden="true" tabindex="-1"></a>df_new <span class="op">=</span> df[<span class="op">~</span>df[<span class="st">'home_ownership'</span>].isin([<span class="st">'OTHER'</span>, <span class="st">'ANY'</span>, <span class="st">'NONE'</span>])]</span>
<span id="cb16-275"><a href="#cb16-275" aria-hidden="true" tabindex="-1"></a>grouped_values <span class="op">=</span> df_new.groupby([<span class="st">'home_ownership'</span>, <span class="st">'application_type'</span>, <span class="st">'hardship_flag'</span>])[<span class="st">'fico_range_low'</span>].median()</span>
<span id="cb16-276"><a href="#cb16-276" aria-hidden="true" tabindex="-1"></a>grouped_values <span class="op">=</span>pd.DataFrame(grouped_values)</span>
<span id="cb16-277"><a href="#cb16-277" aria-hidden="true" tabindex="-1"></a>grouped_values.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-278"><a href="#cb16-278" aria-hidden="true" tabindex="-1"></a>grouped_values.sort_values(by<span class="op">=</span><span class="st">'fico_range_low'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-279"><a href="#cb16-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-280"><a href="#cb16-280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-281"><a href="#cb16-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-284"><a href="#cb16-284" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-285"><a href="#cb16-285" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb16-286"><a href="#cb16-286" aria-hidden="true" tabindex="-1"></a>df_new <span class="op">=</span> df[<span class="op">~</span>df[<span class="st">'home_ownership'</span>].isin([<span class="st">'OTHER'</span>, <span class="st">'ANY'</span>, <span class="st">'NONE'</span>])]</span>
<span id="cb16-287"><a href="#cb16-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-288"><a href="#cb16-288" aria-hidden="true" tabindex="-1"></a>grouped_values_dti <span class="op">=</span> df_new.groupby([<span class="st">'home_ownership'</span>, <span class="st">'application_type'</span>, <span class="st">'hardship_flag'</span>])[<span class="st">'dti'</span>].median()</span>
<span id="cb16-289"><a href="#cb16-289" aria-hidden="true" tabindex="-1"></a>grouped_values_dti <span class="op">=</span> pd.DataFrame(grouped_values_dti)</span>
<span id="cb16-290"><a href="#cb16-290" aria-hidden="true" tabindex="-1"></a>grouped_values_dti.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-291"><a href="#cb16-291" aria-hidden="true" tabindex="-1"></a>grouped_values_dti.sort_values(by<span class="op">=</span><span class="st">'dti'</span>, ascending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-292"><a href="#cb16-292" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-293"><a href="#cb16-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-294"><a href="#cb16-294" aria-hidden="true" tabindex="-1"></a>For the top three FICO scores, candidates eithered owned or mortgaged a home. All of the top three filed jointly. The top three lowest dti scores had applicants that rented or owned, filed either individually or jointly, and did or did not have a hardship flag.</span>
<span id="cb16-295"><a href="#cb16-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-296"><a href="#cb16-296" aria-hidden="true" tabindex="-1"></a><span class="fu"># Does an applicant's FICO score change the interest rate they receive? What about the funding-requested ratio?</span></span>
<span id="cb16-297"><a href="#cb16-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-298"><a href="#cb16-298" aria-hidden="true" tabindex="-1"></a>Okay, let's say you've been approved for a loan. Now, the problem is the interest rate. This will effect how much your monthly payment will be. Thankfully, I can track interest rates. Using the accepted loan applicants, I can find the interest rates people received. Since FICO scores seem to be a widely used metric, I grouped applicants by their FICO score.</span>
<span id="cb16-299"><a href="#cb16-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-300"><a href="#cb16-300" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-301"><a href="#cb16-301" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../accepted_only_data.csv"</span>)</span>
<span id="cb16-302"><a href="#cb16-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-303"><a href="#cb16-303" aria-hidden="true" tabindex="-1"></a>fico_fair_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">580</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">669</span>)]</span>
<span id="cb16-304"><a href="#cb16-304" aria-hidden="true" tabindex="-1"></a>fico_good_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">670</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">739</span>)]</span>
<span id="cb16-305"><a href="#cb16-305" aria-hidden="true" tabindex="-1"></a>fico_very_good_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">740</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">799</span>)]</span>
<span id="cb16-306"><a href="#cb16-306" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df <span class="op">=</span> df[(df[<span class="st">'fico_range_low'</span>] <span class="op">&gt;=</span> <span class="dv">800</span>) <span class="op">&amp;</span> (df[<span class="st">'fico_range_low'</span>] <span class="op">&lt;=</span> <span class="dv">850</span>)]</span>
<span id="cb16-307"><a href="#cb16-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-308"><a href="#cb16-308" aria-hidden="true" tabindex="-1"></a>fico_fair_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-309"><a href="#cb16-309" aria-hidden="true" tabindex="-1"></a>fico_good_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-310"><a href="#cb16-310" aria-hidden="true" tabindex="-1"></a>fico_very_good_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-311"><a href="#cb16-311" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-312"><a href="#cb16-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-313"><a href="#cb16-313" aria-hidden="true" tabindex="-1"></a>fico_fair_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Fair"</span></span>
<span id="cb16-314"><a href="#cb16-314" aria-hidden="true" tabindex="-1"></a>fico_good_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Good"</span></span>
<span id="cb16-315"><a href="#cb16-315" aria-hidden="true" tabindex="-1"></a>fico_very_good_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Very Good"</span></span>
<span id="cb16-316"><a href="#cb16-316" aria-hidden="true" tabindex="-1"></a>fico_exceptional_df[<span class="st">'fico_category'</span>] <span class="op">=</span> <span class="st">"Exceptional"</span></span>
<span id="cb16-317"><a href="#cb16-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-318"><a href="#cb16-318" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> pd.concat([fico_fair_df, fico_good_df, fico_very_good_df, fico_exceptional_df], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb16-319"><a href="#cb16-319" aria-hidden="true" tabindex="-1"></a>new_df[[<span class="st">'month'</span>, <span class="st">'year'</span>]] <span class="op">=</span> new_df[<span class="st">'issue_d'</span>].<span class="bu">str</span>.split(<span class="st">"-"</span>, expand<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-320"><a href="#cb16-320" aria-hidden="true" tabindex="-1"></a>new_df[<span class="st">'issue_d'</span>] <span class="op">=</span> pd.to_datetime(new_df[<span class="st">'issue_d'</span>])</span>
<span id="cb16-321"><a href="#cb16-321" aria-hidden="true" tabindex="-1"></a>data_two <span class="op">=</span> new_df[new_df[<span class="st">'year'</span>] <span class="op">==</span> <span class="st">"2018"</span>]</span>
<span id="cb16-322"><a href="#cb16-322" aria-hidden="true" tabindex="-1"></a>grouped_two <span class="op">=</span> data_two.groupby([<span class="st">'issue_d'</span>, <span class="st">'fico_category'</span>])[<span class="st">'int_rate'</span>].median()</span>
<span id="cb16-323"><a href="#cb16-323" aria-hidden="true" tabindex="-1"></a>ggplot(grouped_two.reset_index(), aes(x<span class="op">=</span><span class="st">'issue_d'</span>, y<span class="op">=</span><span class="st">'int_rate'</span>, group<span class="op">=</span><span class="st">'fico_category'</span>)) <span class="op">+</span> geom_line() <span class="op">+</span> geom_point(color<span class="op">=</span><span class="st">"red"</span>, size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb16-324"><a href="#cb16-324" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-325"><a href="#cb16-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-326"><a href="#cb16-326" aria-hidden="true" tabindex="-1"></a><span class="al">![Different LendingClub Loan Applications by Month and Year](interestrate.gif)</span></span>
<span id="cb16-327"><a href="#cb16-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-328"><a href="#cb16-328" aria-hidden="true" tabindex="-1"></a><span class="fu"># Is there a bound to the Debt-To-Income (DTI) ratio so customers below a limit cannot be accepted?</span></span>
<span id="cb16-329"><a href="#cb16-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-330"><a href="#cb16-330" aria-hidden="true" tabindex="-1"></a>Although you can apply for a loan, you do not necessarily know how your financial status plays a role. DTI or debt-to-income is designed to compare income versus debt. If you have a high ratio, it might be reasonable to assume that you are more unlikely to receive a loan. Let's take a look:</span>
<span id="cb16-331"><a href="#cb16-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-334"><a href="#cb16-334" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-335"><a href="#cb16-335" aria-hidden="true" tabindex="-1"></a>model_df <span class="op">=</span> pd.read_csv(<span class="st">"../model_only_data.csv"</span>)</span>
<span id="cb16-336"><a href="#cb16-336" aria-hidden="true" tabindex="-1"></a>graph_df <span class="op">=</span> model_df[[<span class="st">'debt_to_income_ratio'</span>, <span class="st">'applicant_result'</span>]][model_df[<span class="st">'debt_to_income_ratio'</span>] <span class="op">&lt;=</span> <span class="dv">100</span>]</span>
<span id="cb16-337"><a href="#cb16-337" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb16-338"><a href="#cb16-338" aria-hidden="true" tabindex="-1"></a>counts, edges, bars <span class="op">=</span> ax.hist([graph_df[<span class="st">'debt_to_income_ratio'</span>][graph_df[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">0</span>],</span>
<span id="cb16-339"><a href="#cb16-339" aria-hidden="true" tabindex="-1"></a>          graph_df[<span class="st">'debt_to_income_ratio'</span>][graph_df[<span class="st">'applicant_result'</span>] <span class="op">==</span> <span class="dv">1</span>]], histtype<span class="op">=</span><span class="st">'barstacked'</span>, </span>
<span id="cb16-340"><a href="#cb16-340" aria-hidden="true" tabindex="-1"></a>                              label<span class="op">=</span>[<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb16-341"><a href="#cb16-341" aria-hidden="true" tabindex="-1"></a>ax.legend(prop<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">10</span>})</span>
<span id="cb16-342"><a href="#cb16-342" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Accepted and Rejected Debt-To-Income-Ratio'</span>)</span>
<span id="cb16-343"><a href="#cb16-343" aria-hidden="true" tabindex="-1"></a>plt.xticks([<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">80</span>,<span class="dv">90</span>,<span class="dv">100</span>])</span>
<span id="cb16-344"><a href="#cb16-344" aria-hidden="true" tabindex="-1"></a>plt.yticks([<span class="dv">0</span>,<span class="dv">10000</span>,<span class="dv">20000</span>,<span class="dv">30000</span>,<span class="dv">40000</span>,<span class="dv">50000</span>,<span class="dv">60000</span>,<span class="dv">70000</span>])</span>
<span id="cb16-345"><a href="#cb16-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-346"><a href="#cb16-346" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars[<span class="dv">0</span>], padding<span class="op">=-</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb16-347"><a href="#cb16-347" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars[<span class="dv">1</span>], padding<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb16-348"><a href="#cb16-348" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb16-349"><a href="#cb16-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-350"><a href="#cb16-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-351"><a href="#cb16-351" aria-hidden="true" tabindex="-1"></a><span class="fu"># Using the matching features between accepted and rejected data, can the data effectively predict whether a candidate will be accepted or rejected?</span></span>
<span id="cb16-352"><a href="#cb16-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-353"><a href="#cb16-353" aria-hidden="true" tabindex="-1"></a>Using three classification models, I will building an ensemble model to test the ability to predict an applicant's acceptance.</span>
<span id="cb16-354"><a href="#cb16-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-355"><a href="#cb16-355" aria-hidden="true" tabindex="-1"></a><span class="al">![Model Diagram](ModelChart.png)</span></span>
<span id="cb16-356"><a href="#cb16-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-357"><a href="#cb16-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-358"><a href="#cb16-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb16-359"><a href="#cb16-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-360"><a href="#cb16-360" aria-hidden="true" tabindex="-1"></a>knn_new <span class="op">=</span> knn(n_neighbors<span class="op">=</span>m.ceil((<span class="bu">len</span>(pred_std_train))<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)))</span>
<span id="cb16-361"><a href="#cb16-361" aria-hidden="true" tabindex="-1"></a>algorithm_knn <span class="op">=</span> knn_new.fit(pred_std_train, tar_std_train)</span>
<span id="cb16-362"><a href="#cb16-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-363"><a href="#cb16-363" aria-hidden="true" tabindex="-1"></a>clf <span class="op">=</span> LogisticRegression(random_state<span class="op">=</span><span class="dv">42</span>).fit(pred_std_train, tar_std_train)</span>
<span id="cb16-364"><a href="#cb16-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-365"><a href="#cb16-365" aria-hidden="true" tabindex="-1"></a>tree_clf <span class="op">=</span> DecisionTreeClassifier(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb16-366"><a href="#cb16-366" aria-hidden="true" tabindex="-1"></a>algorithm_tree <span class="op">=</span> tree_clf.fit(pred_std_train, tar_std_train)</span>
<span id="cb16-367"><a href="#cb16-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-368"><a href="#cb16-368" aria-hidden="true" tabindex="-1"></a>voting_clf_best_of_all <span class="op">=</span> VotingClassifier(estimators<span class="op">=</span>[(<span class="st">'knn'</span>, algorithm_knn), (<span class="st">'lr'</span>, clf), (<span class="st">'dt'</span>, algorithm_tree)], </span>
<span id="cb16-369"><a href="#cb16-369" aria-hidden="true" tabindex="-1"></a>                                          voting<span class="op">=</span><span class="st">'soft'</span>)</span>
<span id="cb16-370"><a href="#cb16-370" aria-hidden="true" tabindex="-1"></a>algorithm_ens <span class="op">=</span> voting_clf_best_of_all.fit(pred_std_train, tar_std_train)</span>
<span id="cb16-371"><a href="#cb16-371" aria-hidden="true" tabindex="-1"></a>ensemble_hard <span class="op">=</span> algorithm_ens.predict(pred_std_test)</span>
<span id="cb16-372"><a href="#cb16-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-373"><a href="#cb16-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-374"><a href="#cb16-374" aria-hidden="true" tabindex="-1"></a>**Model Equations**</span>
<span id="cb16-375"><a href="#cb16-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-376"><a href="#cb16-376" aria-hidden="true" tabindex="-1"></a>To test the model's effectiveness, three metrics will be used. Precision, recall, and accuracy.</span>
<span id="cb16-377"><a href="#cb16-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-378"><a href="#cb16-378" aria-hidden="true" tabindex="-1"></a>$$Precision = TP/(TP+FP)$$</span>
<span id="cb16-379"><a href="#cb16-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-380"><a href="#cb16-380" aria-hidden="true" tabindex="-1"></a>$$Recall = TP/(TP+FN)$$</span>
<span id="cb16-381"><a href="#cb16-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-382"><a href="#cb16-382" aria-hidden="true" tabindex="-1"></a>$$Accuracy = (TP+TN)/(TP+FP+TN+FN)$$</span>
<span id="cb16-383"><a href="#cb16-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-384"><a href="#cb16-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-385"><a href="#cb16-385" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-386"><a href="#cb16-386" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">'True Neg'</span>,<span class="st">'False Pos'</span>,<span class="st">'False Neg'</span>,<span class="st">'True Pos'</span>]</span>
<span id="cb16-387"><a href="#cb16-387" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> [<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>]</span>
<span id="cb16-388"><a href="#cb16-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-389"><a href="#cb16-389" aria-hidden="true" tabindex="-1"></a>cm_ens <span class="op">=</span> confusion_matrix(tar_std_test, ensemble_hard)</span>
<span id="cb16-390"><a href="#cb16-390" aria-hidden="true" tabindex="-1"></a>group_counts <span class="op">=</span> [<span class="st">'</span><span class="sc">{0:0.0f}</span><span class="st">'</span>.<span class="bu">format</span>(value) <span class="cf">for</span> value <span class="kw">in</span></span>
<span id="cb16-391"><a href="#cb16-391" aria-hidden="true" tabindex="-1"></a>                cm_ens.flatten()]</span>
<span id="cb16-392"><a href="#cb16-392" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="ss">f'</span><span class="sc">{</span>v1<span class="sc">}</span><span class="ch">\n</span><span class="sc">{</span>v2<span class="sc">}</span><span class="ss">'</span> <span class="cf">for</span> v1, v2 <span class="kw">in</span></span>
<span id="cb16-393"><a href="#cb16-393" aria-hidden="true" tabindex="-1"></a>          <span class="bu">zip</span>(labels,group_counts)]</span>
<span id="cb16-394"><a href="#cb16-394" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> np.asarray(labels).reshape(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb16-395"><a href="#cb16-395" aria-hidden="true" tabindex="-1"></a>disp_ens <span class="op">=</span> ConfusionMatrixDisplay(confusion_matrix<span class="op">=</span>cm_ens)</span>
<span id="cb16-396"><a href="#cb16-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-397"><a href="#cb16-397" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>), dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb16-398"><a href="#cb16-398" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale up the size of all text</span></span>
<span id="cb16-399"><a href="#cb16-399" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(font_scale <span class="op">=</span> <span class="fl">1.1</span>)</span>
<span id="cb16-400"><a href="#cb16-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-401"><a href="#cb16-401" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.heatmap(cm_ens, annot<span class="op">=</span>labels, fmt<span class="op">=</span><span class="st">''</span>, cmap<span class="op">=</span><span class="st">'Oranges'</span>)</span>
<span id="cb16-402"><a href="#cb16-402" aria-hidden="true" tabindex="-1"></a><span class="co"># set x-axis label and ticks. </span></span>
<span id="cb16-403"><a href="#cb16-403" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Predicted"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, labelpad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb16-404"><a href="#cb16-404" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_ticklabels([<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb16-405"><a href="#cb16-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-406"><a href="#cb16-406" aria-hidden="true" tabindex="-1"></a><span class="co"># set y-axis label and ticks</span></span>
<span id="cb16-407"><a href="#cb16-407" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Actual"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, labelpad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb16-408"><a href="#cb16-408" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_ticklabels([<span class="st">'Rejected'</span>, <span class="st">'Accepted'</span>])</span>
<span id="cb16-409"><a href="#cb16-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-410"><a href="#cb16-410" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Confusion Matrix for Loan Applications"</span>, fontsize<span class="op">=</span><span class="dv">20</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb16-411"><a href="#cb16-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-412"><a href="#cb16-412" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb16-413"><a href="#cb16-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-414"><a href="#cb16-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-415"><a href="#cb16-415" aria-hidden="true" tabindex="-1"></a><span class="al">![Ensemble Method Confusion Matrix](results_model.png)</span></span>
<span id="cb16-416"><a href="#cb16-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-417"><a href="#cb16-417" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusions</span></span>
<span id="cb16-418"><a href="#cb16-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-419"><a href="#cb16-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-420"><a href="#cb16-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-421"><a href="#cb16-421" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
<span id="cb16-422"><a href="#cb16-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-425"><a href="#cb16-425" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb16-426"><a href="#cb16-426" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: nlpcode</span></span>
<span id="cb16-427"><a href="#cb16-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "NLP"</span></span>
<span id="cb16-428"><a href="#cb16-428" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-429"><a href="#cb16-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-430"><a href="#cb16-430" aria-hidden="true" tabindex="-1"></a>:::{.callout-note}</span>
<span id="cb16-431"><a href="#cb16-431" aria-hidden="true" tabindex="-1"></a>Note that there are five types of callouts, including:</span>
<span id="cb16-432"><a href="#cb16-432" aria-hidden="true" tabindex="-1"></a><span class="in">`note`</span>, <span class="in">`tip`</span>, <span class="in">`warning`</span>, <span class="in">`caution`</span>, and <span class="in">`important`</span>.</span>
<span id="cb16-433"><a href="#cb16-433" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>